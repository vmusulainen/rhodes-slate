# Rho.MobilePayment## open{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Opens the PD40 Payment reader.  Will fail if not paired manually beforehand.## close{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Close unitializes and disconnects the PD40 payment device.    
       ## isOpened{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Returns whether the PD40 device is enabled or not.## readCardData{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Reads the card data from the PAYMENT device through a swipe (MagStripe), insert (for smart cards). 
		This is asynchronous so the return data is passed back through the callback.## promptPin{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Requests for a PIN and gets the encrypted PIN block. The encrypted data will be returned only if a debit key is injected into the payment device. This is asynchronous call  Note: The character "|" not allowed in the message strings for PD40-100 payment device and it is used as special character in the in the EMDK for PD40-100 device. Requesting promptPin() continuously may pop up the timer on PD40-100 payment device for security reasons and application should wait for this before performing any other actions.## promptMenu{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Displays two lines of messages on the PAYMENT device and provides a menu with a maximum of 4 choices. This is asynchronous call. The character "|" not allowed in the message strings and it is used as special character in the EMDK for PD40-100.## promptAdditionalInfo{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Requests the user to confirm the amount and surcharge passed by the application and prompts the user to provide tip and cashback. The tip, cashback values and the confirmation if surcharge was accepted, will be returned to the application via  callback. If the user presses OK or CANCEL keys, or the call times out, the corresponding message is returned. This is asynchronous call.## promptMessage{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Displays a maximum of 4 line messages on the PAYMENT device.  This method also allows a user confirmation.  
		This can be done by setting the 5th parameter to true, in which case a string containing OK, CANCEL, CORR or TIMEOUT (after 15 seconds).  
		This is an asynchronous call and all data is returned in the callback.## abort{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Cancel previously issued method and display welcome screen on PAYMENT device.## getBatteryLevel{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Query the battery level of the payment device.## getDeviceInfo{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Returns information about the payment device.## createMac{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}This is a required transaction for Canada. Accepts a String of data to be MACed using the ANSI x9.91 standard and the MAC Working Key. This is used for MACing credit transactions when the PINPad is configured to support both credit and debit. This is synchronous call.## validateMac{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Validates the response MAC and displays any authorization messages returned by the host. This method is made Asynchronous call because it is taking more processing time and response will be returned via callback.## completeOnlineEmv{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Completes an online EMV transaction for PIN management. The application must call authorizeCard before calling this API. This is an asynchronous call. After the processing, the response (i.e., EmvData object) is returned through the registered Callback. ## getEmvTags{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Gets tag information from the inserted card. This is an asynchronous call. After the processing, the response (TagData contains TLV raw data as per EMV specification)and also its parsed tag, length and value format is returned through the registered Callback.Before calling this method,readcarddata has to be called.## setEmvTags{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Sets tag information for the inserted card. Valid EMV tag IDs and tag values should be passed. Passing invalid EMV tag IDs or tag values may cause the payment device to go into unstable state or unknown behavior. The payment device has to be rebooted in order to continue normal operation.Before calling this method,readcarddata has to be called.## authorizeCard{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Authorizes the EMV transaction amounts using the inserted chip (EMV) card. This is an asynchronous call. Before calling this method,readcarddata has to be called.## removeCard{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Instruct the user to remove the EMV card inserted in the payment device. This call prompts the user to remove the inserted EMV chip card and also clears the EMV data saved by readCardData method. If the card is NOT inserted, it will give success.## getLowBatteryThreshold{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Gets the acceptable low battery level. If the battery drops below this value, the device will not execute any of the selected commands..## setLowBatteryThreshold{`Android`, `CE`, `Sailfish`, `WM`, `WP8`, `Win32`, `iOS`}Sets the acceptable low battery percent.  If the battery drops below this value, the device will not execute some of the commands.
			and it will return the error code indicating the battery is low.
		battery is low.
		